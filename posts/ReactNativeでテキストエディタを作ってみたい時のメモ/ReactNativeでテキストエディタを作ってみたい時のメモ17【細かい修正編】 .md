>------------<
- ã‚¿ã‚¤ãƒˆãƒ«:[ã€17ã€‘React Nativeã§ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹ï¼ã€ç´°ã‹ã„ä¿®æ­£ç·¨ã€‘]
- WordPressã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã‹ï¼Ÿ:y[x]ã¯ã„n[]ã¾ã ã—ãªã„
- æŠ•ç¨¿æ™‚:p[x]å…¬é–‹d[]ä¸‹æ›¸ã
- ã‚«ã‚¹ã‚¿ãƒ URL:[React-Native-challenge-to-create-text-editor-17]
- ã‚«ãƒ†ã‚´ãƒªID:[3,11,12]
- ã‚¿ã‚°ID:[]
- è¦‹å‡ºã—ç”»åƒã®ID:[]
- è­˜åˆ¥ç•ªå·[aH1inE3QlBS9]
>------------<



ã“ã‚“ã«ã¡ã¯ï¼ã‹ãŸã¤ã‚€ã‚Š([@Katatumuri_nyan](https://twitter.com/Katatumuri_nyan))ã§ã™ï¼

Reactã‚’è§¦ã£ã¦ã¿ã¦ã€ã‚µã‚¤ãƒˆçš„ãªã‚‚ã®ã¯ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(*Â´Ï‰ï½€)
ãã“ã§ã€æ¬¡ã¯ReactNativeã‚’è§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã€ç°¡å˜ãªãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œæˆã—ã‚ˆã†ã¨ä¼ã‚“ã§ãŠã‚Šã¾ã™(ç¬‘)

ã‚‚ã†ãã‚ãã‚ã‚¢ãƒ—ãƒªã¨ã—ã¦é…ä¿¡ã§ãã‚‹ãã‚‰ã„ã«ãªã£ã¦ããŸï¼
ã„ã¾è¦‹ã¤ã‹ã£ã¦ã„ã‚‹ç´°ã‹ã„ãƒã‚°ã‚„ã€ã‚‚ã†å°‘ã—æ”¹è‰¯ã—ãŸã„ç‚¹ãªã©ã‚’ä¿®æ­£ã—ã¦ã„ãã¾ã™ğŸ˜Š

[GitHub](https://github.com/katatumuri-maimai/snail_Markdown_TextEditor)ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ï¼

**æœ€åˆã‹ã‚‰è¦‹ã‚‹â†“**
[kanren id="557"]

**å‰å›ã‚’è¦‹ã‚‹â†“**
[kanren id="656"]


## ä¿®æ­£ã—ãŸã„ã¨ã“ã‚

1. PDFå‡ºåŠ›æ™‚ã«ç”»åƒãŒã‚ã‚‹ã¨åæ˜ ã•ã‚Œãªã„
2. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã®ä¸€ç•ªä¸‹ãŒè¦‹åˆ‡ã‚Œã¦ã—ã¾ã†
3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ãŒå…¥åŠ›ã®ãŸã³ã«ãƒˆãƒƒãƒ—ã«æˆ»ã£ã¦ã—ã¾ã†


## 1. PDFå‡ºåŠ›æ™‚ã«ç”»åƒãŒã‚ã‚‹ã¨åæ˜ ã•ã‚Œãªã„
![picture 17](../../images/5df58ec5d0b7143c306ed7665c6d93939846d4990e31b972f3eb693156b2279b.png)  

â†‘å·¦ã‚ˆã†ã«å…¥åŠ›ã™ã‚‹ã¨ã€å³ã®ã‚ˆã†ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œã¾ã™ã€‚
ã—ã‹ã—ã€PDFå‡ºåŠ›çµæœã¯â†“ã§ã™ã€‚

![picture 16](../../images/e32b296325c61dc818f25aabe1b0935527ef3957ade4c6e8dad1977ec48e5b97.png)  

PDFå‡ºåŠ›ã«è©¦ç”¨ã—ã¦ã„ã‚‹`Print`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä»•æ§˜ã§ã€PDFã«å‡ºåŠ›ã™ã‚‹éš›ã«ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ç”»åƒã¯base64ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

base64ã«å¤‰æ›ã™ã‚‹ã®ã¯å¤§å¤‰ãªã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯base64ã§å†èª­ã¿è¾¼ã¿ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚


```javascript
async function convertImage(html) {
    // imgã‚¿ã‚°ã®å–å¾—
    const imageTag = /(<img src=)["|'](.*?)["|']+/gi
    const imageTagList = html.match(imageTag)

    // imgã‚¿ã‚°ãŒã‚ã‚‹ã¨ã
    if (imageTagList.length != 0) {
        let imageSrcList = []
        // imgã‚¿ã‚°ã‚’å‰Šé™¤ã—ã¦srcã‚’å–ã‚Šå‡ºã™
        imageTagList.forEach(imageTag => {
            const imageSrc = imageTag.replace(/<img src=["|'](.*?)["|']+/i, "$1")
            imageSrcList.push(../../imagesrc)
        })

        // base64ã«ç½®æ›ãŒå¿…è¦ãªsrcãƒªã‚¹ãƒˆ
        let needReaplace_imageSrcList = [...imageSrcList]

        // base64ã«ç½®æ›ä¸è¦ãªsrcã‚’å–ã‚Šé™¤ã
        allowImageHandlers.forEach(imageHandler => {
            needReaplace_imageSrcList =
                needReaplace_imageSrcList
                    .filter(../../imagesrc => { return filterByImageHandler(../../imagesrc, imageHandler) })
        })


        // base64ã«ç½®æ›ãŒå¿…è¦ãªsrcãƒªã‚¹ãƒˆã‚’base64ã«å¤‰æ›

        for (const imageSrc of needReaplace_imageSrcList) {
            let before_imageSrc = imageSrc
            let imageUri = imagePickerUri + imageSrc
            let after_imageSrc = ''

            needAddHeaderImageHandlers.forEach(imageHandler => {
                const matchData = imageSrc.match(imageHandler)
                if (!!matchData) {
                    imageUri = localDefaltImageHandler + { ...matchData }.input
                }
            })

            const matchData = imageSrc.match(localDefaltImageHandler)
            if (!!matchData) {
                imageUri = { ...matchData }.input
            }

            const ext = imageUri.match(/.*\.(.*$)/)[1].toLowerCase()
            const fileType = ext == 'jpeg' ? 'jpg' : ext

            after_imageSrc =
                `data:image/${fileType};base64,` +
                await FileSystem.readAsStringAsync(imageUri, { encoding: FileSystem.EncodingType.Base64 })

            html = html.replace(before_imageSrc, after_imageSrc)

        }
        
        const imgStyle = `<img style="max-width:20%;max-height;50%;"`

        html = html.replace(/<img /g, imgStyle)
    }
    return html
}
```
â†‘ã“ã®ã‚ˆã†ãªé–¢æ•°ã‚’ä½œæˆã—ã¦ã€ç”»åƒã‚’PDFã§ã‚‚è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

ç”»åƒã®ã‚µã‚¤ã‚ºã‚’å€‹ã€…ã«å¤‰ãˆãŸã„ã¨ã“ã‚ã§ã™ãŒã€é›£ã—ãã†ãªã®ã§ã¨ã‚Šã‚ãˆãšå›ºå®šã®å¤§ãã•ã«ã—ã¦ã„ã¾ã™ã€‚



## 2. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã®ä¸€ç•ªä¸‹ãŒè¦‹åˆ‡ã‚Œã¦ã—ã¾ã†
![picture 18](../../images/ca30e64cfa7c01c3180cb89af5ef8977eb9058bbc041a25f43bba324c07d4df4.png)  

â†‘å³å´ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã€ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä¸€ç•ªä¸‹ãŒè¦‹ãˆã¦ã„ãªã„ã§ã™ã­ã€‚

ã‚¹ã‚¿ã‚¤ãƒ«èª¿ç¯€ã—ã¦ã„ãã¾ã™ã€‚

## 3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ãŒå…¥åŠ›ã®ãŸã³ã«ãƒˆãƒƒãƒ—ã«æˆ»ã£ã¦ã—ã¾ã†
![picture 19](../../images/b039e03dd08446ceba675e7cec2c6f17da9bb0c23185364e3b3b717ab0dd1dad.gif)  
â†‘ã“ã‚“ãªé¢¨ã«ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã‚’ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚‚ã€å…¥åŠ›ã‚’å§‹ã‚ã‚‹ã¨ä¸Šã¾ã§æˆ»ã£ã¦ã—ã¾ã„ã¾ã™ã€‚

`Markdown`ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ã›ã„ã¿ãŸã„ã§ã™ã­ã€‚
`Markdown`ã«æ¸¡ã™ãƒ†ã‚­ã‚¹ãƒˆãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«`Markdown`ãŒæ›´æ–°ã•ã‚Œã‚‹ã®ã§ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚

```javascript
function toArrayText(){
  const ArrayText = text.split(/(!\[.*\]\(.*\))/)
  return ArrayText
}

// çœç•¥
{toArrayText().map(e=>{
  return <Markdown>{e}</Markdown>
})}
```
â†‘ã“ã®ã‚ˆã†ã«ã€`Markdown`ã«æŒ¿å…¥ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’é…åˆ—ã«ã™ã‚‹ã“ã¨ã§ã€ã™ã§ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹`Markdown`ãŒæ›´æ–°ã•ã‚Œã‚‹ã®ã‚’é˜²ãã¾ã—ãŸã€‚



ä»Šå›ã¯ã“ã®ã‚ãŸã‚Šã§çµ‚ã‚ã‚Šã«ã—ã¾ã™ï¼
ã‚ã¨ã¯ã€ç´°ã‹ã„ä¿®æ­£ã‚’æ²¢å±±ã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

ãªã®ã§ã€ã“ã“ã§ä¸€æ—¦ã€ŒReact Nativeã§ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹ï¼ã€ã‚·ãƒªãƒ¼ã‚ºã®é–‹ç™ºç·¨ã¯çµ‚äº†ã§ã™ã€‚
æ¬¡å›ä»¥é™ã®è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ—ãƒªã®å…¬é–‹ç”³è«‹ã¨ã€æˆæœã®ã¾ã¨ã‚ã‚’ã—ã¦ã„ãã¾ã™ğŸ˜Š

å¤§ãã‚ã®ä¿®æ­£ã‚„é‡è¦ãªä¿®æ­£ãªã©ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€åˆ¥é€”è¨˜äº‹ã«ã™ã‚‹ã‹ã‚‚ã§ã™ï¼


ãã‚Œã§ã¯ï¼

â†“ç¶šã
[kanren id=""]