>------------<
- ã‚¿ã‚¤ãƒˆãƒ«:[ã€4ã€‘React Nativeã§ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹ï¼ã€å†ã³ç’°å¢ƒæ§‹ç¯‰ç·¨ã€‘]
- WordPressã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã‹ï¼Ÿ:y[x]ã¯ã„n[]ã¾ã ã—ãªã„
- æŠ•ç¨¿æ™‚:p[x]å…¬é–‹d[]ä¸‹æ›¸ã
- ã‚«ã‚¹ã‚¿ãƒ URL:[React-Native-challenge-to-create-text-editor-4]
- ã‚«ãƒ†ã‚´ãƒªID:[3,11,12]
- ã‚¿ã‚°ID:[]
- è¦‹å‡ºã—ç”»åƒã®ID:[]
- è­˜åˆ¥ç•ªå·[HqhCf4zbGThO]
>------------<

<!-- â†“ç¶šã
[kanren id="575"] -->

ã“ã‚“ã«ã¡ã¯ï¼ã‹ãŸã¤ã‚€ã‚Š([@Katatumuri_nyan](https://twitter.com/Katatumuri_nyan))ã§ã™ï¼

Reactã‚’è§¦ã£ã¦ã¿ã¦ã€ã‚µã‚¤ãƒˆçš„ãªã‚‚ã®ã¯ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(*Â´Ï‰ï½€)
ãã“ã§ã€æ¬¡ã¯ReactNativeã‚’è§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã€ç°¡å˜ãªãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œæˆã—ã‚ˆã†ã¨ä¼ã‚“ã§ãŠã‚Šã¾ã™(ç¬‘)

Dockerã§React Nativeã‚’é–‹ç™ºã™ã‚‹ã¨ã€ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ãŒåŠ¹ãã¾ã›ã‚“ã€‚
ä¸€å¿œä»£æ›¿ãˆä½œã‚‚ã‚ã‚‹ã®ã§ã™ãŒâ€¦
ã‚ã¾ã‚Šã«ã‚‚ãƒªãƒ­ãƒ¼ãƒ‰ãŒé…ã™ãã‚‹ã®ã§ã€WSLã§ç’°å¢ƒæ§‹ç¯‰ã—ãªãŠã—ã¾ã™ï¼


[GitHub](https://github.com/katatumuri-maimai/ReactNative-TextEditer)ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ï¼

**æœ€åˆã‹ã‚‰è¦‹ã‚‹â†“**
[kanren id="557"]

**å‰å›ã‚’è¦‹ã‚‹â†“**
[kanren id="568"]



Windows+DockerDesktopã§ã®React Native+Expoã§ã¯ã€ä»•æ§˜ä¸Šãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰åŠ¹ã‹ãªã„ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§ã€WSLã‚’ä½¿ã£ã¦ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¦ã„ãã¾ã™ï¼
ï¼ˆãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã«ç’°å¢ƒæ§‹ç¯‰ã—ãªã„ã®ã¯ã€ãŸã ã®ã“ã ã‚ã‚Šã€‚ï¼‰

[Dockerã§React Nativeç’°å¢ƒä½œæˆã‹ã‚‰ã€Expo Clientã§å®Ÿæ©Ÿç¢ºèªã™ã‚‹ã¾ã§](https://qiita.com/h-yoshikawa44/items/51b631ec0a6beabdce2d)
â†‘ã“ã¡ã‚‰ã®æ–¹ãŒâ†“ã®ã‚ˆã†ãªè¨˜äº‹ã‚‚æ›¸ã„ã¦ãã ã•ã£ã¦ã‚‹ã®ã§ã€å‚è€ƒã«ç’°å¢ƒæ§‹ç¯‰ã—ã¦ã„ãã¾ã™ï¼
[WSLã§React Native + Expoç’°å¢ƒã‚’ä½œã‚ã†](https://qiita.com/h-yoshikawa44/items/610ffea888f13275cde8)


## WSLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã¨ã‚Šã‚ãˆãšã€WSLãŒå¿…è¦ãªã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

[WSLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](https://qiita.com/matarillo/items/61a9ead4bfe2868a0b86)
â†‘ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ï¼
ï¼ˆã©ã“ã‹ã§Dockerã¨WSLã®é•ã„ã¨ã‹ãã‚Œãã‚Œãƒ¡ãƒªãƒ‡ãƒ¡ã¨ã‹èª¿ã¹ãªãã‚ƒãƒ‡ã‚¹ã­ã€‚ï¼‰

WSL2ã®æ–¹ãŒæ–°ã—ã„ã¿ãŸã„ãªã®ã§ã€WSL2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ã¤ã„ã§ã«[ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/katatumuri-maimai/ReactNative_TextEditor)ã‚’æ–°ã—ãã—ã¾ã—ãŸã€‚ï¼ˆå‰å›Editorã®ã¤ã¥ã‚Šé–“é•ã£ã¦ãŸ(ã€ƒï¾‰Ï‰ï¾‰)ï½—ï¼‰

ãªã˜ã¿ã®Ubuntuã«ã—ã¾ã—ãŸï½ï¼

![picture 1](images/fe0ccf66833c587d34ac20d86c109042d33689065a21bbf2a7044155a4abac1e.png)  

![picture 2](images/f0d22e0f0f1c1e5f39c9c2ce41ca3b4ce1e38914fe4cbee62173da18e89d624f.png)  

```
> WslRegisterDistribution failed with error: 0xc03a001a
```

ãªãœâ€¦

[failed with error: 0xc03a001a ã§å¤±æ•—ã™ã‚‹ã¨ãã®å¯¾å‡¦æ³•](https://qiita.com/kuryus/items/27a7206c64eca7ba710b)
â†‘ã“ã¡ã‚‰ã‚’å‚è€ƒã«ç›´ã—ã¦ã„ãã¾ã™ï¼

ç„¡äº‹èµ·å‹•ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã—ãŸ(*Â´Ï‰ï½€)

![picture 3](images/b62c08ce44b946a25002a83dbe6c6874d6321263472937057ae760ee79416dfa.png)  

Ubuntoä¹…ã—ã¶ã‚Šã§å¬‰ã—ã„ï½ï¼ˆæ™®æ®µDockerã§ä½¿ã£ã¦ã„ã‚‹ã‘ã©ãªã‚“ã¨ãªãï½—ï¼‰

## Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[Windows ã« WSL ã‚’ä½¿ã£ã¦ Node ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹](https://qiita.com/nekonekonekosan/items/61a6b9d4da6bdfd1d0bb)
â†‘ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ï¼

## ReactNative+Expoç’°å¢ƒæ§‹ç¯‰
ã‚„ã£ã¨ã“ã“ã¾ã§ãã¾ã—ãŸï¼
[WSLã§React Native + Expoç’°å¢ƒã‚’ä½œã‚ã†](https://qiita.com/h-yoshikawa44/items/610ffea888f13275cde8)



### ç–‘å•ãƒ¡ãƒ¢
ã“ã“ã§ã¡ã‚‡ã£ã¨ç–‘å•ï¼šVScodeã§ã‚³ãƒ¼ãƒ‰ç·¨é›†ã§ãã‚‹ã‚“ã ã‚ã†ã‹â€¦ï¼Ÿ
[VSCodeã‚’WSLã§ä½¿ç”¨ã™ã‚‹è¨­å®š](https://infltech.com/articles/N0jUEQ)
â†‘ã§ã„ã‘ã‚‹ã£ã½ã„ã€‚è©¦ã—ã¦ã¿ã‚ˆã†ã€‚

ã„ã‘ãŸã‘ã©ã€ã›ã£ã‹ãã¤ãã£ãŸãƒªãƒã‚¸ãƒˆãƒªâ€¦ã¯ã©ã†ãªã‚‹ã®ã‹ãªï½—

ã†ã¾ãã„ãã¾ã—ãŸï½ï¼
sourcetreeã«ã‚‚ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç™»éŒ²ã§ããŸã®ã§ã€ã„ã„æ„Ÿã˜ã§ã™ã­ã€‚


## ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãŒã‚ˆãã‚ã‹ã‚‰ãªã„
`~/.profile`ã£ã¦ã©ã“ï¼Ÿã£ã¦æ€ã£ãŸã®ã§ã€æ¢ã—ã¦ã¿ã¾ã—ãŸã€‚

ubuntuã‚’èµ·å‹•ã™ã‚‹ã¨æœ€åˆã«è¡¨ç¤ºã•ã‚Œã‚‹ç”»é¢ã§ã€`ls -a`ã¨æ‰“ã£ã¦ã¿ã¾ã™ã€‚

![picture 4](images/1c138014db7e979e819b8dc016eb5e38c5f8c2818386b039b2cfaa46010320e0.png)  

`.profile`ã‚ã£ãŸï¼ï¼ï¼

ã“ã“ã«ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãŒã€é–‹ãæ–¹ãŒåˆ†ã‹ã‚‰ã‚“ã€‚ã€‚ã€‚

`vim .profile`ã§ã¨ã‚Šã‚ãˆãšé–‹ã„ã¦ã¿ã¾ã—ãŸã€‚
vimã§ç·¨é›†ã§ãã¾ã—ãŸã€‚[Vimåˆå¿ƒè€…ã«æ§ãå®Ÿè·µçš„å…¥é–€](https://qiita.com/okamos/items/c97970ab34ff55ff3167)

ã§ã‚‚ã€å®Ÿæ©Ÿã§é–‹ã‘ã¾ã›ã‚“(Â´;Ï‰;ï½€)

`netstat -nao | find "19000"`ã§ç¢ºèªã™ã‚‹ã¨ã€ã»ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã¯è¢«ã£ã¦ãªã„ã¿ãŸã„ã§ã—ãŸã€‚

ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«åˆ‡ã£ã¦ã¿ã¾ã—ãŸãŒç‰¹ã«ä½•ã‚‚èµ·ã“ã‚‰ãšã€‚

![picture 5](images/ccb4e6ccc584e31981e02b860b5a27101505a3ddec05a535c639bc394fb43357.png)  

ã¨ã‚Šã‚ãˆãšTunnelãƒ¢ãƒ¼ãƒ‰ã§ä½¿ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã‚‰ã€é–‹ã‘ã¾ã—ãŸï¼
ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã‚‚åŠ¹ãã®ã§ã€å®Ÿæ©Ÿç¢ºèªã§ããŸã‚è‰¯ã‹ã£ãŸ(*Â´Ï‰ï½€)


## Android Studioã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[WSLã§React Native + Expoç’°å¢ƒã‚’ä½œã‚ã†](https://qiita.com/h-yoshikawa44/items/610ffea888f13275cde8)
â†‘ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ã€‚

### ç’°å¢ƒå¤‰æ•°ã®è¿½åŠ 
[Windows10ã§Tempã‚„Pathãªã©ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹æ–¹æ³•](https://proengineer.internous.co.jp/content/columnfeature/5205)
[Windowsã®ç’°å¢ƒãƒ‘ã‚¹ã‚’é€šã™(path)](http://realize.jounin.jp/path.html)
â†‘ã“ã¡ã‚‰ã‚’å‚è€ƒã«è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‹ã‚‰è¡Œã„ã¾ã—ãŸã€‚

ã†ã¾ãã„ã‹ãªã„ã®ã§ã€â†“ã€‚
[[Android] adb ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã« PATHã‚’åˆ‡ã‚‹ã€PATHã‚’é€šã™](https://akira-watson.com/android/path-environment.html)

ã“ã‚Œã§ã„ã‘ã¾ã—ãŸï¼PATHã®æœ€å¾Œã«\ãŒè¶³ã‚Šãªã‹ã£ãŸã¿ãŸã„ã§ã™ã­ã€‚


### Android Studioã§ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```
Couldn't start project on Android: No Android connected device found, and no emulators could be started automatically.
Please connect a device or create an emulator (https://docs.expo.io/workflow/android-studio-emulator).
Then follow the instructions here to enable USB debugging:
https://developer.android.com/studio/run/device.html#developer-device-options. If you are using Genymotion go to Settings -> ADB, select "Use custom Android SDK tools", and point it at your Android SDK directory.
```

ã§ãã¾ã›ã‚“ï½—ï½—ï½—
ãªã‚“ã§ï¼Ÿ


[WSL2ã®adbã‚³ãƒãƒ³ãƒ‰ã§Windowsãƒ›ã‚¹ãƒˆã®adb-serverã«æ¥ç¶šã™ã‚‹](https://blog.takeyuweb.co.jp/entry/2021/04/17/152724)
â†‘ã‚’å‚è€ƒã«ã‚„ã£ã¦ã¿ã¾ã™ã€‚


[Using the Android emulator on Windows 10 with WSL2](https://pellea.medium.com/using-the-android-emulator-on-windows-10-with-wsl2-39c2bae30c49)
â†‘ã‚’è¦‹ãªãŒã‚‰ubuntuç”¨ã®Android SDK / platform-tools ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«


```
sudo apt install openjdk-8-jdk

wget https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip
unzip sdk-tools-linux-4333796.zip
```
`unzip`ãŒãªã„ã®ã§å…¥ã‚Œã¾ã™ã€‚`sudo apt install unzip`

```
unzip sdk-tools-linux-4333796.zip
mv tools android-sdk-tools
cd android-sdk-tools

sdkmanager "system-images;android-28;google_apis_playstore;x86_64" "build-tools;28.0.3" "platforms;android-28" --sdk_root="$ANDROID_SDK_ROOT"
sdkmanager "platform-tools" --sdk_root="$ANDROID_SDK_ROOT"
sdkmanager --licenses
```

`sdkmanager`å…¥ã£ã¦ãªã„ğŸ˜¢
[SDKToolsã ã‘ã§ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’è¨­å®š èµ·å‹•](https://qiita.com/SeijiNishiwaki/items/09ee4f50011ca825610d)
ã“ã‚Œã¿ãŸã‚‰ã€Command line toolsã ã‘ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚‰ã—ã„ã®ã§ã€ã‚„ã£ã¦ã¿ã¾ã™ã€‚

åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§

```
wget https://dl.google.com/android/repository/commandlinetools-win-7302050_latest.zip
unzip commandlinetools-win-7302050_latest.zip
```

`cmdline-tools`ãŒå¢—ãˆã¾ã—ãŸã€‚


ãªã‚“ã‹ä½¿ãˆãªã„ï½—ï½—ï½—
`sdkmanager: command not found`

è§£å‡ã‹ã‚‰ã‚„ã‚Šç›´ã—ã¾ã™ã€‚ubuntuã‚‚å†èµ·å‹•ã—ãŸã‚‚ã®ã®ã§ããªã„ã®ã§ã€ã€ã€ã€‚

ã‚ã€ãƒ‘ã‚¹ãŒé€šã£ã¦ãªã„ã ã‘ã‹ã‚‚ã—ã‚Œãªã„ï¼
[ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã§ã€ŒCommand not foundã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹](https://www.itmedia.co.jp/help/tips/linux/l0255.html)
`sdkmanager`ã®å­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§`./`ã‚’ã¤ã‘ã¦å®Ÿè¡Œã—ãŸã‚‰ã§ããŸã®ã§ã€ãƒ‘ã‚¹ã®å•é¡Œã§ã™ã­ã€‚
`bin/`ã¤ã‘ã¦ã‚„ã£ã¦ã¿ã¾ã™ã€‚

```
cd android-sdk-tools

bin/sdkmanager "system-images;android-28;google_apis_playstore;x86_64" "build-tools;28.0.3" "platforms;android-28" --sdk_root="$ANDROID_SDK_ROOT"
bin/sdkmanager "platform-tools" --sdk_root="$ANDROID_SDK_ROOT"
bin/sdkmanager --licenses

touch ~/.android/repositories.cfg

cd ~/.android/platform-tools
```

ã‚€ã‚€ã‚€ã€‚`bash: cd: /home/mymai/.android/platform-tools: No such file or directory`
ãŸã—ã‹ã«ãªã„ã€‚

rootã«å…¥ã£ã¦ã„ã¾ã—ãŸï½—

![picture 1](images/234b3811c62e3cdc86f4ffc09e79ab6cc9a4ed0a704f85adf267d454eb662d92.png)  

ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã•ã›ã¾ã™ï½—

```
mv build-tools licenses platform-tools tools emulator patcher platforms system-images .android
```

ã‚‚ã†ä¸€åº¦ä»¥ä¸‹ã‚’è©¦ã—ã¾ã™ã€‚`abd`ä½¿ãˆãªã‹ã£ãŸã®ã§`./adb`ã§
```
cd ~/.android/platform-tools
./adb --version
./adb kill-server
./adb devices

```


ã§ããŸã®ã§ã€`.profile`ã«ä»¥ä¸‹ã‚’è¿½è¨˜

```
# JDK
if [[ -e /usr/lib/jvm/java-8-openjdk-amd64 ]]; then
  export JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64"
  export PATH="$PATH:$JAVA_HOME/bin"
fi
# Android tools
if [[ -e $HOME/android-sdk-tools ]]; then
    export PATH="$HOME/android-sdk-tools:$HOME/android-sdk-tools/bin:$PATH"
    export PATH="$HOME/.android/platform-tools:$PATH"
    export ANDROID_HOME="$HOME/.android"
    export ANDROID_SDK_ROOT="$HOME/.android"
    export REPO_OS_OVERRIDE="linux"
    adb kill-server 2> /dev/null
    export ADB_SERVER_SOCKET=tcp:$(cat /etc/resolv.conf | grep nameserver | cut -d' ' -f2):5037
fi
```

ubuntuå†èµ·å‹•ã€‚

[WSL2ã§ã®ADBã®ä½¿ç”¨](https://pellea.medium.com/using-adb-with-wsl2-7aebbb070a47)ã‚‚å‚è€ƒã«â†“

[start-adb.ps1](https://gist.github.com/pellea/9d1c39bbc561f781d4190f1d1439f653#file-start-adb-ps1)ã¨ã„ã†åå‰ã§Windowsä¸Šã«ä¿å­˜ã™ã‚‹ï¼ˆãƒªãƒ³ã‚¯å…ˆã«ã‚³ãƒ¼ãƒ‰ã‚ã‚Šã¾ã™ã€‚ï¼‰

> $adbPath ã¯ "C:\Users\ãƒ¦ãƒ¼ã‚¶ãƒ¼å\AppData\Local\Android\Sdk\platform-tools"

ã‚ã¨ã¯ã€
[ã€PowerShellã€‘PowerShellã‚’ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œã—ãŸã„ï¼ã‚½ãƒ¼ã‚¹ã®å…ˆé ­ã«åŸ‹ã‚è¾¼ã‚€ã ã‘ã§è‡ªå‹•ã§ç®¡ç†è€…æ¨©é™ã«æ˜‡æ ¼ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼](https://correct-log.com/powershell_auto_admin/)
â†‘ã‚’å‚è€ƒã«ã€å†’é ­ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```
if (!([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole("Administrators")) { Start-Process powershell.exe "-File `"$PSCommandPath`"" -Verb RunAs; exit }
```

`start-adb.ps1`ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€`PowerShellã§å®Ÿè¡Œ`ã‚’æŠ¼ã™ã€‚

ã†ãƒ¼ã‚“ã€‚ã„ã‘ãªã„ã€‚
ãƒ‘ã‚½ã‚³ãƒ³ã”ã¨å†èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚

3.Expoã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã€Expo DevToolsï¼ˆlocalhost:19002ï¼‰ã®ã€ŒRun on Android device/emulatorã€ã‚’é¸æŠã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚

```
Couldn't start project on Android: adb W 06-30 18:23:15   678   678 network.cpp:149] failed to connect to '172.25.112.1:5037': Connection timed out
* cannot start server on remote host
error: cannot connect to daemon at tcp:172.25.112.1:5037: failed to connect to '172.25.112.1:5037': Connection timed out
```


```
# JDK
if [[ -e /usr/lib/jvm/java-8-openjdk-amd64 ]]; then
  export JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64"
  export PATH="$PATH:$JAVA_HOME/bin"
fi
# Android tools
if [[ -e $HOME/android-sdk-tools ]]; then
    export PATH="$HOME/android-sdk-tools:$HOME/android-sdk-tools/bin:$PATH"
    export PATH="$HOME/.android/platform-tools:$PATH"
    export ANDROID_HOME="$HOME/.android"
    export ANDROID_SDK_ROOT="$HOME/.android"
    export REPO_OS_OVERRIDE="linux"
    adb kill-server 2> /dev/null
    export ADB_SERVER_SOCKET=tcp:$(cat /etc/resolv.conf | grep nameserver | cut -d' ' -f2):5037
fi
```
â†‘ã“ã‚Œã€`export ADB_SERVER_SOCKET=tcp:$(cat /etc/resolv.conf | grep nameserver | cut -d' ' -f2):5037`ã ã‘ã§ã„ã„æ°—ãŒã€‚
`.profile`ã‚’ç·¨é›†ã—ã¦`source ~/.profile`

é–¢ä¿‚ãªã‹ã£ãŸã—ã€å¿…è¦ã§ã—ãŸã€‚

ãŸã¶ã‚“ã ã‘ã©ã€ãƒãƒ¼ãƒˆã®è¨­å®šãŒã†ã¾ãã„ã£ã¦ã„ãªã„ã‚‰ã—ã„ã€‚
`source ~/.profile`ã§`adb kill-server 2> /dev/null`ã¾ã§ã—ã‹èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã€‚

![picture 1](images/c342f227d8f42477e1b509d7c7b233f3ca4bffb5aeb6637f4be0ac0556c970f8.png)  

Windowsã¨WSLã®`adb`ã‚“ï½ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ã†ã¨ã†ã¾ãã„ã‹ãªã„ã¿ãŸã„ã ã‘ã©ã€åŒã˜ã§ã—ãŸã€‚

`adb -a nodaemon server start`


~~~ãŸã‚ã—ã«Windowså´ã§`adb kill-server`ã™ã‚‹ã¨`cannot connect to daemon at tcp:5037: cannot connect to 127.0.0.1:5037: å¯¾è±¡ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã£ã¦æ‹’å¦ã•ã‚ŒãŸãŸã‚ã€æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ (10061)`ã¨å‡ºã¾ã—ãŸã€‚~~~
~~~[ã€Œå¯¾è±¡ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã£ã¦æ‹’å¦ã•ã‚ŒãŸãŸã‚ã€æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸã€VisualStudioã®client.Connectã®localhost 80ã§ã‚¨ãƒ©ãƒ¼å‡ºãŸã¨ãã®å¯¾å‡¦æ³•](https://selife5.com/visualstudio-localhost80-error/)~~~
~~~â†‘ã‚’å‚è€ƒã«ã€ã€ŒWindows Communication Foundation HTTP ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã€ã€ŒWindows Communication Foundation éHTTP ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¾ã—ãŸã€‚~~~

ubuntuå†èµ·å‹•ã€‚


`adb.exe devices`ãªã‚‰ã§ããã†ï¼ã¨ã„ã†ã“ã¨ã¯â€¦


â†‘ã®é•·ã„ã®æ¶ˆã—ã¦ã€`.bashrc`ã«ä»¥ä¸‹ã‚’è¿½åŠ 
```
alias adb='adb.exe'
```

ã‚‚ãƒ€ãƒ¡ã€‚

[ADB tool in WSL cannot identify device solution](https://www.programmersought.com/article/30543551648/)
â†‘ã‚ˆã‚Šâ†“
`sudo apt-get update && sudo apt-get install android-tools-adb`

Windowsã¨WSLã®adbãŒä¸€ç·’ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã˜ã‚ƒãªã„ã¨ã„ã‘ãªã„ã‚‰ã—ã„ã®ã§ã€
`sudo cp adb /usr/lib/android-sdk/platform-tools/adb -i`ã§å‰ã®æ–¹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸadbã‚’ä»Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸadbã«ä¸Šæ›¸ãã—ã¾ã—ãŸã€‚


`export ADB_SERVER_SOCKET=tcp:$(cat /etc/resolv.conf | grep nameserver | cut -d' ' -f2):5037`ã‚’`.profile`ã«è¿½è¨˜




ã§ããªã„ï¼¼(^o^)ï¼ï½µï¾œï¾€


## Androidãƒ‡ãƒã‚¤ã‚¹ã§ã®USBãƒ‡ãƒãƒƒã‚°ã®æœ‰åŠ¹åŒ–
[ReactNative-EXPOã§Androidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã‚¢ãƒ—ãƒªèµ·å‹•ã™ã‚‹ã¾ã§ã«ã¯ã¾ã£ãŸã¨ã“ã‚](https://qiita.com/ageage-hamsters/items/c5dd95c9f6dc87dac298)
[Androidãƒ‡ãƒã‚¤ã‚¹ã§ã®USBãƒ‡ãƒãƒƒã‚°ã®æœ‰åŠ¹åŒ–](https://www.embarcadero.com/starthere/xe5/mobdevsetup/android/en/enabling_usb_debugging_on_an_android_device.html)
![picture 1](images/dbc1b6541b34fd6e330f3ff7fe7122ca00293238980a8fe76b3db160b241adfa.png)  

![picture 2](images/6715bc6b335fc02f49d3969bcc46fb4d432ae6a3e279ac462227cd852f64d8ee.png)  

![picture 5](images/b6b9608691a535f5b892508259a02b23fec17e76de9080cc38bd8f70f42f7509.png)  

![picture 7](images/604a88db79de4a32dec8f8f003e176f1bece9342dacfa32427d1fb63786761a7.png)  

![picture 6](images/4dc24d4aef1b9031745eed0f7c7444c8f94565f085e7bbab9672e0d8d39c06fe.png)  

![picture 8](images/0c9ce5376d456be4091f78f8339fb3788a567c044cc42adda90f49e91ec1bdcf.png)  


ã§ããªã„ï¼ï¼ï¼



## socatã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[Building a react native app in WSL2](https://gist.github.com/bergmannjg/461958db03c6ae41a66d264ae6504ade)
â†‘ã‚ˆã‚Šã€‚`sudo apt-get install socat`

`socat -d -d TCP-LISTEN:5037,reuseaddr,fork TCP:$(cat /etc/resolv.conf | tail -n1 | cut -d " " -f 2):5037`


æ‰‹é †ã«ãã£ã¦ã€ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã—ãªãŠã™ã¨ã¤ãªã’ãŸï¼
ã§ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ğŸ˜¢

```
Couldn't start project on Android: could not connect to TCP port 5554: Connection refused
```


[TCPãƒãƒ¼ãƒˆã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸï¼šWSL2ã®Androidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§Expoã‚¢ãƒ—ãƒªã‚’é–‹ã“ã†ã¨ã™ã‚‹ã¨æ¥ç¶šãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ](https://tech.wayne-chu.com/archives/10527)
â†‘ã‚’è¦‹ãªãŒã‚‰PowerShellã§`Set-NetFirewallProfile -DisabledInterfaceAliases "vEthernet (WSL)"`ï¼ˆç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œï¼‰

```
$WSL_CLIENT = bash.exe -c "ip addr show eth0 | grep -oP '(?<=inets)d+(.d+){3}'";
$WSL_CLIENT -match 'd{1,3}.d{1,3}.d{1,3}.d{1,3}';
$WSL_CLIENT = $matches[0];
iex "netsh interface portproxy add v4tov4 listenport=5554 listenaddress=127.0.0.1 connectport=5554 connectaddress=$WSL_CLIENT"
```

ã§ããªã„ã®ã§ãƒ‘ã‚½ã‚³ãƒ³ã”ã¨å†èµ·å‹•ã€‚





`ip addr show eth0 | grep -oP '(?<=inet\s)\d+(\.\d+){3}'`

```
iex "netsh interface portproxy delete v4tov4 listenport=8081 listenaddress=127.0.0.1" | out-null;
$WSL_CLIENT = bash.exe -c "ip addr show eth0 | grep -oP '(?<=inet\s)\d+(\.\d+){3}'";
$WSL_CLIENT -match '\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}';
$WSL_CLIENT = $matches[0];
iex "netsh interface portproxy add v4tov4 listenport=8081 listenaddress=127.0.0.1 connectport=8081 connectaddress=$WSL_CLIENT"
```

androidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã®ç¢ºèªã¯ç„¡ç†ã§ã—ãŸï¼ï¼ï¼ï¼¼(^o^)ï¼ï½µï¾œï¾€

ã‚‚ã†iPadã ã‘ã§ã„ã„ã‚„ï¼
ï¼

[Androidã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã§ãã¾ã›ã‚“ã§ã—ãŸï¼šTCPãƒãƒ¼ãƒˆ5580ã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸï¼š127.0.0.1ï¼š5580ã«æ¥ç¶šã§ãã¾ã›ã‚“ï¼š](https://forums.expo.io/t/couldnt-start-project-on-android-could-not-connect-to-tcp-port-5580-cannot-connect-to-127-0-0-1/44593)


`.expo`å‰Šé™¤ã—ã¦è¦‹ã¾ã—ãŸã ã‚ã ï¼


[[WSL 2] NIC Bridge mode ğŸ–§ (Has TCP WorkaroundğŸ”¨)](https://github.com/microsoft/WSL/issues/4150)
â†‘ã‚ˆã‚ŠPowerShellã®ã‚¿ã‚¹ã‚¯ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚

ã§ããªã„


### ãã‚‚ãã‚‚LANã§Expoã«æ¥ç¶šã§ããªã„ã®ãŒåŸå› ã§ã¯ï¼Ÿ

[wsl2ã§sshã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã€å¤–éƒ¨ã‹ã‚‰ãã“ã«æ¥ç¶š](https://qiita.com/yabeenico/items/15532c703974dc40a7f5)
â†‘ã‚ˆã‚ŠPowerShellã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰`netsh.exe interface portproxy add v4tov4 listenaddress=localhost listenport=19000 connectaddress=127.0.1.1 connectport=19000`


ã§ãã¬ï¼

[Windows WSL2ã«å¤–éƒ¨ã‹ã‚‰ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®è¨­å®š](https://rcmdnk.com/blog/2021/03/01/computer-windows-network/)

ã“ã‚Œã‚‚ã§ããªã„ãªã


```
ipv4 ã‚’ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹:         ipv4 ã«æ¥ç¶šã™ã‚‹:

Address         Port        Address         Port
--------------- ----------  --------------- ----------
0.0.0.0         19000       127.0.0.1       19000
*               19000       192.168.0.19    19000
localhost       19000       127.0.1.1       19000
```

```
iex "netsh interface portproxy add v4tov4 listenport=5554 listenaddress=127.0.0.1 connectport=5554 connectaddress=172.22.185.61"
iex "netsh interface portproxy add v4tov4 listenport=5037 listenaddress=127.0.0.1 connectport=5037 connectaddress=172.22.185.61"
iex "netsh interface portproxy add v4tov4 listenport=5037 listenaddress=127.0.0.1 connectport=5037 connectaddress=172.22.176.1"
```

ã¦ã‹ã¦ã‹ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¨ã‹ãƒªãƒƒã‚¹ãƒ³ã¨ã‹ã‚³ãƒã‚¯ãƒˆã¨ã‹åˆ†ã‹ã‚‰ãªã„ï½—
[ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰](https://ikatakos.com/pot/software/windows/network/routing)


ã†ãƒ¼ã‚“â€¦
[WSL2 ç’°å¢ƒã§ Windows å´ã® adb.exe ã‚’ä½¿ã†ã¨ã„ã‚ã„ã‚æ¥½](https://scrapbox.io/hotchpotch/WSL2_%E7%92%B0%E5%A2%83%E3%81%A7_Windows_%E5%81%B4%E3%81%AE_adb.exe_%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E6%A5%BD)
â†‘ã“ã‚Œã‚„ã£ã¦ã¿ã‚ˆã†

C:\Users\mymai\AppData\Local\Android\Sdk\platform-tools\adb.exe


`/usr/bin`ã«adbãŒã‚ã£ãŸã®ã§ã€å‰Šé™¤ã—ã¦`/usr/bin`ã§â†“
`sudo ln -s /mnt/c/Users/mymai/AppData/Local/Android/Sdk/platform-tools/adb.exe adb`

```
cd /usr/lib/android-sdk/platform-tools/
sudo rm adb
```
ã‚‚ã—ã¾ã—ãŸã€‚

ã‚ã€Expoå´ã§`Run on Android device/emulator`é¸æŠã™ã‚‹ã¨ã€Expoã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’androidã®ä»®æƒ³ãƒ‡ãƒã‚¤ã‚¹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯ã¯ã„ã‘ã¾ã—ãŸï¼
ã‚ã£ã¡ã‚ƒç°¡å˜ã ã£ãŸï¼

ã—ã‹ã—ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒâ€¦

![picture 1](images/ca08a986deb5253a35a1aebe118e64dfe019f40aa25814a9e0f8da1a6719c924.png)  


`192.168.0.19:19000`ã«LANæ¥ç¶šã§ããªã„ã®ã§ã€ã—ã‚‡ã†ãŒãªã„ã§ã™ã­ã€‚
`tunnel`ã«ã—ã¦ã¿ã¾ã™ã€‚

ã‚‚ã†ä¸€åº¦`Run on Android device/emulator`ï¼ï¼ï¼ï¼
ã„ã‘ãŸï¼ï¼ï¼ï¼ï¼ï¼
ã‚„ã£ãŸï¼ï¼ï¼ï¼ï¼ï¼

![picture 2](images/b60903185f855ac13010dbaefc00be0f89d328ed2339879222e7166f45929cca.png)  


é•·ã‹ã£ãŸï½—ï½—ï½—


åŸå› ã¯ã‚ã¾ã‚Šã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ãŒâ€¦
ãŠãã‚‰ããƒãƒ¼ãƒˆã®è§£æ”¾å•é¡Œã¨ã€adbã®è¨­å®šã®ä»•æ–¹ã§ã™ã­ã€‚
Windowså´ã®adbã¨WSL2å´ã®adbã®å…¼ã­åˆã„ã¨ã„ã†ã‹â€¦
WSL2å´ã§adbãŒã†ã¾ãä½¿ãˆãªã„ã®ã§ã€Windowså´ã®adbã‚’ä½¿ã£ãŸã‚‰ã†ã¾ãã„ã£ãŸã£ã¦è¨€ã†è©±ã«è½ã¡ç€ãã¾ã—ãŸã€‚

ã‚ã¨LANãŒã†ã¾ãä½¿ãˆãªã„ã®ã§ã€tuunelã§è¡Œã‘ãŸã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚

ã‚ˆã‹ã£ãŸï½—


ãƒ‘ã‚½ã‚³ãƒ³ã”ã¨å†èµ·å‹•ã™ã‚‹ã¨ã€tuunelãŒä½¿ãˆãªããªã‚Šã¾ã—ãŸğŸ˜¢
ãªã‚“ã§ã‚„â€¦
```
Tunnel URL not found (it might not be ready yet), falling back to LAN URL.
Error starting tunnel protocol fault (couldn't read status): connection reset
```

ãƒãƒ¼ãƒˆãƒ—ãƒ­ã‚­ã‚·ã®è¨­å®šã„ã˜ã£ã¦ãŸã®ãŒãƒ€ãƒ¡ã ã£ãŸã¿ãŸã„ã€‚PowerShellã§ç®¡ç†è€…æ¨©é™ã§`netsh int portproxy reset all`ã—ãŸã‚‰ã„ã‘ã¾ã—ãŸã€‚


ã¡ãªã¿ã«ã€æœ€åˆã®androidã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’Expoã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ™‚ã¯ã€`LAN`ã€ãã®ã‚ã¨ã®æ¥ç¶šã¯`tunnel`ã§ã§ãã¾ã™ã€‚

![picture 1](images/3f448e8c51b378af9b5d09eccd2d0f3c87cb4c969c0ac18e13a937c2ad0ffb83.png)  

Pixel Xã«ã—ã¦ã¿ã¦ã‚‚ã§ãã¾ã—ãŸï¼


ã“ã‚Œã§ã€AndroidStudioã€iPhoneã€iPadã§ã®ç¢ºèªãŒã§ãã‚‹ãƒ¼ï¼
ã—ã‹ã‚‚ã€ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã‚‚åŠ¹ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(*Â´Ï‰ï½€)ï¼ˆDockerã®æ™‚ã‚ˆã‚Šæ—©ã„ï¼‰
LANã®æ–¹ãŒãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰é€Ÿã„ã‚‰ã—ã„ã‘ã©ã€ã¡ã‚‡ã£ã¨LANã¯ã‚ãã‚‰ã‚ã¦ã‚‚ã‚ˆã•ãã†ï¼

ã“ã‚Œã§ã‚„ã£ã¨ç’°å¢ƒæ§‹ç¯‰å®Œäº†ã§ã™ï¼ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™(*Â´Ï‰ï½€)