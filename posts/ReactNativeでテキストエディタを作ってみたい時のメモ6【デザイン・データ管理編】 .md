>------------<
- ã‚¿ã‚¤ãƒˆãƒ«:[ã€6ã€‘React Nativeã§ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹ï¼ã€ãƒ‡ãƒ¼ã‚¿ç®¡ç†ç·¨ã€‘]
- WordPressã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã‹ï¼Ÿ:y[x]ã¯ã„n[]ã¾ã ã—ãªã„
- æŠ•ç¨¿æ™‚:p[x]å…¬é–‹d[]ä¸‹æ›¸ã
- ã‚«ã‚¹ã‚¿ãƒ URL:[React-Native-challenge-to-create-text-editor-6]
- ã‚«ãƒ†ã‚´ãƒªID:[3,11,12]
- ã‚¿ã‚°ID:[]
- è¦‹å‡ºã—ç”»åƒã®ID:[]
- è­˜åˆ¥ç•ªå·[]
>------------<

<!-- â†“ç¶šã
[kanren id=""] -->

ã“ã‚“ã«ã¡ã¯ï¼ã‹ãŸã¤ã‚€ã‚Š([@Katatumuri_nyan](https://twitter.com/Katatumuri_nyan))ã§ã™ï¼

Reactã‚’è§¦ã£ã¦ã¿ã¦ã€ã‚µã‚¤ãƒˆçš„ãªã‚‚ã®ã¯ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(*Â´Ï‰ï½€)
ãã“ã§ã€æ¬¡ã¯ReactNativeã‚’è§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã€ç°¡å˜ãªãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œæˆã—ã‚ˆã†ã¨ä¼ã‚“ã§ãŠã‚Šã¾ã™(ç¬‘)

é•·ã„ç’°å¢ƒæ§‹ç¯‰ã‚’çµŒã¦ã€ã‚„ã£ã¨å‰å›ReactNativeã‚’è§¦ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸâœ¨
ã“ã‚Œã§ã€ã‚¢ãƒ—ãƒªã¯ä½œã‚Œãã†ã ã£ã¦ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§ã€ã“ã“ã‹ã‚‰æœ€ä½é™ã®æ©Ÿèƒ½ã‚’ä»˜ã‘ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ï½ï¼

[GitHub](https://github.com/katatumuri-maimai/ReactNative-TextEditer)ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ï¼

**æœ€åˆã‹ã‚‰è¦‹ã‚‹â†“**
[kanren id="557"]

**å‰å›ã‚’è¦‹ã‚‹â†“**
[kanren id="575"]


## ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚‹
ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒãŒmasterã®ã¾ã¾ãªã®ã§ã€ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šã¾ã—ãŸï½—
ä»Šå›ã€WSL2ã§ç’°å¢ƒæ§‹ç¯‰ã—ãŸé–¢ä¿‚ãªã®ã‹ã€gitãŒç®¡ç†è€…æ¨©é™å¿…è¦ã§ã€sourcetreeã§æ“ä½œã§ããªããªã£ã¡ã‚ƒã„ã¾ã—ãŸğŸ’¦
ï¼ˆç’°å¢ƒæ§‹ç¯‰ã®æ™‚ã«è‰²ã€…ã„ã˜ã£ã¦ãŠã‹ã—ããªã£ãŸå¯èƒ½æ€§ã‚‚ï¼‰

ã¨ã„ã†ã“ã¨ã§ã€WSL2ã®ubuntuã¡ã‚ƒã‚“ã‹ã‚‰ã€ç®¡ç†è€…æ¨©é™ã§gitã‚³ãƒãƒ³ãƒ‰æ‰“ã£ã¦ã¾ã™ğŸ˜¨
ä½•ã‹æ–¹æ³•ã‚ã‚‹ã¨ã‚‚æ€ã†ã‘ã©ã€ã‚³ãƒãƒ³ãƒ‰æ‰“ã£ãŸæ–¹ãŒé€Ÿã„ã®ã§â†
ï¼ˆVScodeã‹ã‚‰æ‰‹è»½ã«ã‚³ãƒãƒ³ãƒ‰æ‰“ã¦ã‚‹ã‹ã‚‰ã²ã‚ƒã£ã»ã„ï¼‰

[åŸºæœ¬çš„ãªGitã‚³ãƒãƒ³ãƒ‰ã¾ã¨ã‚](https://qiita.com/2m1tsu3/items/6d49374230afab251337)

## ãƒ‡ãƒ¼ã‚¿ç®¡ç†
ä¸€å¿œãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãªã®ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã“ã‹ã«æ ¼ç´ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚
ï¼ˆãƒœã‚¿ãƒ³ä½œã£ã¦ã¦æ°—ã¥ãã¾ã—ãŸï½—ï¼‰

ä»Šå›ã¯ã€ã‚¢ãƒ—ãƒªé–‹ç™ºãŒé–‹å§‹ã§ãã‚‹ã®ã‹ã€ã¡ã‚ƒã‚“ã¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ãã‚‹ã®ã‹ã€ã‚ã‚“ã¾ã‚Šè¦‹é€šã—ãŒç«‹ã£ã¦ãªã‹ã£ãŸã®ã§ã€ãƒ‡ã‚¶ã‚¤ãƒ³ç­‰ã—ã¦ã„ãªãã¦ï½—
ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã«ã¤ã„ã¦è€ƒãˆã¦ã„ã¾ã›ã‚“ã§ã—ãŸï½—

ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¯ã©ã†ã‚„ã£ã¦ã™ã‚‹ã®ã‹ã€ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã„ã¨æ€ã„ã¾ã™ã€‚

### ç«¯æœ«ã«ä¿å­˜ã™ã‚‹ã‚±ãƒ¼ã‚¹
[[React Native] ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã«ã¤ã„ã¦AsyncStorageã¨Realmã‚’èª¿ã¹ã¦ã¿ãŸ](https://qiita.com/ariiyu/items/0eeb96888c76512cb703)
â†‘ã“ã‚Œã‚’èª­ã‚€æ„Ÿã˜ã ã¨ã€`AsyncStorage`ã§è‰¯ã„æ°—ãŒã—ã¾ã™ã­ã€‚

ä»¥å‰ã€Reactã§Firebaseã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€ã‚¯ãƒ©ã‚¦ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã™ã‚‹ã»ã©ã§ã‚‚ãªã„æ°—ãŒã—ã¦ã¦ã€‚
[ã€ReactNativeã€‘AsyncStorageã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»å–å¾—ã™ã‚‹æ–¹æ³•](https://reactnative-st.com/2020/07/10/%E3%80%90reactnative%E3%80%91asyncstorage%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%80%A4%E3%82%92%E4%BF%9D%E5%AD%98%E3%83%BB%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/)
â†‘ã“ã‚ŒãŒReact Nativeã®å…ƒã®`AsyncStorage`ã£ã½ã„ã§ã™ã­ã€‚

[react-native-storageã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹](https://zenn.dev/nekoniki/articles/b295b0d123f7b1)
â†‘ç°¡å˜ãã†ãªã®ã§ã€ä»Šå›ã¯ã“ã¡ã‚‰ã‚’ãƒ™ãƒ¼ã‚¹ã«å®Ÿè£…ã—ã¦ã„ã‘ãã†ã€‚


### ã‚¯ãƒ©ã‚¦ãƒ‰ã«ä¿å­˜ã™ã‚‹ã‚±ãƒ¼ã‚¹
[react-native-storageã§ç«¯æœ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŒãŸã›ã‚‹](https://nekoniki.com/20200526_reactnative_storage)
â†‘ã‚ˆã‚Š

> ã“ã‚“ãªå ´åˆã«ã‚ªã‚¹ã‚¹ãƒ¡
> ãƒ­ãƒ¼ã‚«ãƒ«ã«RDBã‚’æŒã¤ã»ã©ã§ã¯ãªã„ãƒ‡ãƒ¼ã‚¿(å˜ä¸€ã®ãƒ•ãƒ©ã‚°ã‚„æ—¥ä»˜ã€æ–‡å­—åˆ—ãªã©)
> ã±ã£ã¨æ€ã„ã¤ãã®ã¯ã€ã‚¢ãƒ—ãƒªã®å‹•ä½œã«é–¢ã‚ã‚‹è¨­å®šå€¤ã§ã™ã‹ã­ã€‚
> ä¾‹ãˆã°ã‚¢ãƒ—ãƒªã®è¨­å®šç”»é¢ã‹ã‚‰ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚’å¤‰æ›´ã§ãã¦ã€ãã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã¯ã‚¢ãƒ—ãƒªå†…ã§Enumã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ç«¯æœ«å†…ã«ä¿æŒã—ã¦ã„ã‚Œã°å¤§ç­‹å•é¡Œãªã„ã¯ãšã§ã™ã€‚
> â€»ä¸Šè¨˜ã®å ´åˆã‚‚ã€åŒä¸€ã‚¢ãƒ—ãƒªã‚’è¤‡æ•°ç«¯æœ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¦ã€ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚’å…±æœ‰ã—ãŸã„å ´åˆç­‰ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŒãŸã›ã¦ãŠãã¹ãã ã¨ã¯æ€ã„ã¾ã™ã€‚

ã‚€ã‚€ã‚€

>åŒä¸€ã‚¢ãƒ—ãƒªã‚’è¤‡æ•°ç«¯æœ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¦ã€ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚’å…±æœ‰ã—ãŸã„

ã—ãŸã„ï¼(ï½€ï½¥Ï‰ï½¥Â´)

ãƒ†ãƒ¼ãƒã‚’å®Ÿè£…ã™ã‚‹ã‹ã—ãªã„ã‹ã¯ãŠã„ã¦ãŠã„ã¦ã€ãƒ¡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã®å…±æœ‰ã¯ã—ãŸã„ã§ã™ã­â€¦ã€‚

[React Nativeã«ãŠã‘ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è€ƒå¯Ÿ](https://www.wazalab.com/2016/08/14/react-native%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E8%80%83%E5%AF%9F/)
â†‘ã™ã”ã„ï¼

ã‚¯ãƒ©ã‚¦ãƒ‰ã§ã®ãƒ‡ãƒ¼ã‚¿ã®åŒæœŸã«ã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãŒå¿…è¦ã§ã™ã‚ˆã­ã€‚
ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ©Ÿèƒ½ã¾ã§ã¤ã‘ã‚‹ã®ã¯ã¡ã‚‡ã£ã¨ãƒãƒ¼ãƒ‰ãƒ«ãŒé«˜ã„ã§ã™ã­ï½ã€‚
ä»Šå›ã¯ã€å…±æœ‰æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¦ãƒ‰(Googleãƒ‰ãƒ©ã‚¤ãƒ–ã¨ã‹)ã«ä¿å­˜ã§ãã‚‹ãã‚‰ã„ã«ã¨ã©ã‚ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã¯ãªãã€å˜ç´”ã«å…±æœ‰ã«ã—ã¾ã™ã€‚ï¼‰

[React Native + Expo ã‚¢ãƒ—ãƒªã§unstatedã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–](https://qiita.com/hitotch/items/f563ec8a60f05bb7edd8)

### ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜æ–¹æ³•æ±ºå®š

- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹
- å…±æœ‰æ©Ÿèƒ½ã§å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚‚ä¿å­˜ã§ãã‚‹
- ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ãŸæ™‚ã®æœªä¿å­˜ã®ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿æŒ

ã§è¡Œã“ã†ã¨æ€ã„ã¾ã™ï¼


## ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿æ›¸ãã‚’ã™ã‚‹
[React Nativeã§éŠã‚“ã§ã¿ã‚ˆã† â€“ å…¶ãƒå¼ï¼šreact native storage ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜](https://blog.photosynthesic.jp/2018/09/react-native%E3%81%A7%E9%81%8A%E3%82%93%E3%81%A7%E3%81%BF%E3%82%88%E3%81%86-%E5%85%B6%E3%83%8E%E5%BC%90%EF%BC%9Areact-native-storage-%E3%81%A7%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E4%BF%9D%E5%AD%98/)
â†‘ã‚’å‚è€ƒã«å®Ÿè£…ã—ã¦ã„ãã¾ã™ï¼

ã¨ã‚Šã‚ãˆãš`npm install react-native-storage`ã—ã¦Expoå†èµ·å‹•

å®Ÿè£…æ‰‹é †ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã§ããŸã‚‰ãªã¨ã€‚

1. ä¿å­˜ãƒ»é–‹ããƒœã‚¿ãƒ³ã‚’ä½œã‚‹
2. ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
3. ãƒ‡ãƒ¼ã‚¿ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
4. ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‚’å–å¾—ã™ã‚‹
5. ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‹ã‚‰é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹

ã‚ˆã£ã—ã‚ƒï¼


### 1. ä¿å­˜ãƒ»é–‹ããƒœã‚¿ãƒ³ã‚’ä½œã‚‹
ãƒ‘ãƒãƒ«ã®ä¸Šã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã‚’ä½œã£ã¦ã€ãã“ã«ä¿å­˜ãƒ»é–‹ããƒœã‚¿ãƒ³ã‚’ä½œã‚Šã¾ã™ã€‚

![picture 10](images/39644acd8046cf6a87bade3f29d0fee024c7890b75740770f8f2e1af7cbfef38.png)  

```javascript
// panelã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸Šã®æ–¹
<View style={styles.panelBody}>
   <View style={styles.panelMenu}>
     <Pressable style={styles.button}><Text style={styles.buttonText}>é–‹ã</Text></Pressable>
     <Pressable style={styles.button}><Text style={styles.buttonText}>ä¿å­˜</Text></Pressable>
   </View>
 </View>
```

### 2. ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
ã¨ã‚Šã‚ãˆãšä¿å­˜ã—ã¦ã„ãã¾ã™ï¼ï½—
[React Nativeã§éŠã‚“ã§ã¿ã‚ˆã† â€“ å…¶ãƒå¼ï¼šreact native storage ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜](https://blog.photosynthesic.jp/2018/09/react-native%E3%81%A7%E9%81%8A%E3%82%93%E3%81%A7%E3%81%BF%E3%82%88%E3%81%86-%E5%85%B6%E3%83%8E%E5%BC%90%EF%BC%9Areact-native-storage-%E3%81%A7%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E4%BF%9D%E5%AD%98/)
â†‘ã‚’å‚è€ƒã«åˆæœŸè¨­å®šã¨ã€ä¿å­˜ã®è¨­å®šã‚’ã—ã¾ã—ãŸã€‚

[ã€ReactNativeã€‘ç¾åœ¨ã®æ—¥ä»˜ã€æ™‚é–“è¡¨ç¤ºã‚’ã™ã‚‹æ–¹æ³•](https://reactnative-st.com/2020/07/09/%E3%80%90reactnative%E3%80%91%E7%8F%BE%E5%9C%A8%E3%81%AE%E6%97%A5%E4%BB%98%E3%80%81%E6%99%82%E9%96%93%E8%A1%A8%E7%A4%BA%E3%82%92%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/)
ä¿å­˜æ™‚é–“ã‚‚è¨­å®š


#### ãƒ‡ãƒ¼ã‚¿ã®è¨­å®š
```javascript
export function fileData(filetitle, filetext) {
  const filename = filetitle + '.md'
  const date = new Date().toLocaleString()
  return ({
    key: 'loginState',
    id: 'id',
    data: {
      name: filename,
      date: date,
      text: filetext
    }
  })
}
```
â†‘ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ã“ã‚“ãªæ„Ÿã˜

#### ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜é–¢æ•°ã®ä½œæˆ
![picture 11](images/9a4e74c5922905ec72b1fb2e36bb16a76d2bf99bbe295901cc38c303a75978af.png)  
ã‚ã‚Œï¼`AsyncStorage`ãŒéæ¨å¥¨ã ï¼ï½—ï½—ï½—

[sunnylqm/react-native-storage](https://github.com/sunnylqm/react-native-storage)ã«ã‚ˆã‚‹ã¨`npm install @react-native-community/async-storage`ã“ã‚Œã‚‚å¿…è¦ã¿ãŸã„ã§ã™ã€‚
ã„ã‚Œã¾ã™ï¼

```
- remove @react-native-community/async-storage from package.json
- run "expo install @react-native-async-storage/async-storage"
- update your imports manually, or run "npx expo-codemod sdk41-async-storage './**/*'".
```
expo install ä½¿ã£ã¦ãªã„ã‹ã‚‰ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ã§ã¡ã‚ƒã£ãŸï½—
`package.json`ã‹ã‚‰`@react-native-community/async-storage`ã‚’æ¶ˆã—ã¦ã€
`expo install expo install @react-native-async-storage/async-storage`ã—ã¾ã™ï¼

importã‚‚å³ã«å¤‰ãˆã¾ã™ã€‚`import AsyncStorage from '@react-native-async-storage/async-storage'`


æ–°ãŸã«`Storage.js`ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã€ã¨ã‚Šã‚ãˆãšä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã«ã—ã¾ã—ãŸã€‚
```javascript
import AsyncStorage from '@react-native-async-storage/async-storage';
import Storage from 'react-native-storage';

//ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®è¨­å®š
var storage = new Storage({
  // æœ€å¤§å®¹é‡, 1000ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 
  size: 1000,

  // AsyncStorageã‚’ä½¿ã†ï¼ˆWEBã§ã‚‚RNã§ã‚‚ï¼‰ã€‚
  // ã‚»ãƒƒãƒˆã—ãªã„ã¨ãƒªãƒ­ãƒ¼ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã‚‹ã‚ˆã€‚
  storageBackend: AsyncStorage,

  // ï¼ˆãŸã¶ã‚“ï¼‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æœŸé™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ä¸€æ—¥(1000 * 3600 * 24 milliseconds).
  // nullã«ã‚‚è¨­å®šã§ãã¦ã€æœŸé™ãªã—ã®æ„å‘³ã«ãªã‚‹ã‚ˆã€‚
  defaultExpires: 1000 * 3600 * 24,

  // ãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã‹ã©ã†ã‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ trueã€‚
  enableCache: true,

  // ãƒªãƒ¢ãƒ¼ãƒˆã‚·ãƒ³ã‚¯ã®è¨­å®šï¼ˆã ã¨æ€ã†ã€‚ï¼‰
  sync: {
    // ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¿°
  }
})

export function fileData(filetitle, filetext) {
  const filename = filetitle + '.md'
  const date = new Date().toLocaleString()
  return ({
    key: 'mdfile',
    id: 'id',
    data: {
      name: filename,
      date: date,
      text: filetext
    }
  })
}

export function saveFileData(fileData) {
  storage.save(fileData);
}

export function loadFileData(fileData) {
  storage.load(fileData).then(ret => {
    // ãƒ­ãƒ¼ãƒ‰ã«æˆåŠŸã—ãŸã‚‰
    console.log(ret.name + ' is ' + ret.text);
  }).catch(err => {
    // ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ãŸã‚‰
    console.warn(err.message);
    switch (err.name) {
      case 'NotFoundError':
        // è¦‹ã¤ã‹ã‚“ãªã‹ã£ãŸå ´åˆã®å‡¦ç†ã‚’æ›¸ã“ã†
        break;
      case 'ExpiredError':
        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ‡ã‚Œã®å ´åˆã®å‡¦ç†ã‚’æ›¸ã“ã†
        break;
    }
  });
}
```


#### ãƒ†ã‚­ã‚¹ãƒˆã®å†’é ­è¡Œã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å–å¾—
ã•ã£ãã®é–¢æ•°ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚
å…ˆé ­ã®è¡Œã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ï¼

ãƒ†ã‚­ã‚¹ãƒˆã‚’é…åˆ—ã«ã—ã¦ã€ç©ºæ–‡å­—ã˜ã‚ƒãªã„å…ˆé ­ã®è¡Œã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

[JavaScripté…åˆ—ã®ç©ºæ–‡å­—ã‚’å‰Šé™¤](https://qiita.com/lostfind/items/e2a2ae1075c76f15c40b)

```javascript
// App.js
function saveFileData(){
  const firstRowEndPos = textInput.split('\n');
  const filetitle = firstRowEndPos.filter(Boolean)[0]
  S.saveFileData(S.fileData(filetitle, textInput))
}
```

```javascript
// App.js
<MyPanel
  saveFileData={saveFileData}
/>
```

ãƒ‘ãƒãƒ«ã®ä¿å­˜ãƒœã‚¿ãƒ³ã«æ¸¡ã—ã¦ã¿ã¾ã—ãŸã€‚
ä¿å­˜ã§ããŸã£ã½ã„ã‚“ã§ã™ãŒã€ã§ãã¦ã„ã‚‹ã®ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ï½—



### 3. ãƒ‡ãƒ¼ã‚¿ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
ã¨ã‚Šã‚ãˆãšã€ä¿å­˜ã—ãŸã‚‚ã®ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¾ã™ï½—

![picture 12](images/6a9402a076b0596e598bd5b7d4f3bfdf781a270108442aeb7c51ef8a79c360f1.png)  
é–‹ã‘ã¦ã„ã‚‹ï¼ï¼ï¼

ã©ã“ã«ä¿å­˜ã—ã¦ã„ã‚‹ã‚“ã ã‚ã†ï½—
å¾Œã§ä¿å­˜ã—ã¦ã„ã‚‹ã¨ã“ã‚ã‚’çªãæ­¢ã‚ã¾ã™ï½—
ã‚ã¨ã€ä¿å­˜ã§ããŸã‹ã©ã†ã‹ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‹ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚‚å‡ºã—ãŸã„ãªã€‚

### 4. ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‚’å–å¾—ã™ã‚‹
ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã®å–å¾—ã£ã¦ã§ãã‚‹ã‚“ã‹ã„ãªâ€¦ï¼Ÿ

[getallkeys](https://react-native-async-storage.github.io/async-storage/docs/api#getallkeys)ã“ã‚Œã‹ãªï¼Ÿ
![picture 13](images/0310eeefe7200caddef1400bf42d40189cb2f11d1db289a5fcd9314290bb9a98.png)  

å–å¾—ã¯ã§ããŸã£ã½ã„ã§ã™ã­ã€‚

[hoge: [object Object]ã®å¯¾å‡¦æ³•](https://hacknote.jp/archives/12274/)


```javascript
// App.js ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
function GetAllData() {
  const [data, setData] = useState('')

  useEffect(() => {
    S.GetAllData().then(e => {
      console.log('App.js 4>>'+e);
    })
  }, []);
  console.log(data);
  return(
    <Text>a</Text>
  )
}
```

```javascript
// Storage.js æƒ…å ±å–å¾—é–¢æ•°
export async function loadFileData(fileData) {
  const data = await storage.load(fileData).then(ret => {
    return ret
  }).catch(err => {
    console.warn('S 54>>'+ JSON.stringify(fileData.key) + ">>>>" + err.message + ">>>>" +err);
    switch (err.name) {
      case 'NotFoundError':
        break;
      case 'ExpiredError':
        break;
    }
  });
  return data
}

export async function GetAllData(){
    let data = []
    keys = await AsyncStorage.getAllKeys()
  
  for(let i in keys){
    const key = keys[i];
    const json = await loadFileData({ key: key }); 
    if(!json===false){
      data.push(await loadFileData({ key: key }))
    }
  }
  return data
}

```

#### ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‚’è¡¨ç¤º
![picture 14](images/7704dc8c2d3b1c2b60ae5957699a355382b358b59bcceda31164a3830085282c.png)  
ã“ã‚“ãªæ„Ÿã˜ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ããŸã®ã§ã€è¡¨ç¤ºã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™(*Â´Ï‰ï½€)

![picture 15](images/2dd349b41cce34e2bde98a76d353be9da4cf466d459f6c5d832b2c0387b30d7d.png)  

ãŠï¼è¡¨ç¤ºã§ãã¾ã—ãŸã€‚
ä»Šã¯Textã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¡¨ç¤ºã—ã¦ã„ã‚‹ã®ã§ã€ãƒœã‚¿ãƒ³ã«ã—ãŸã‚Šãªã‚“ã‚„ã‹ã‚“ã‚„ã—ã¾ã™ã€‚
ã‚ã¨ã€`App.js`ã«æ›¸ã„ã¦ã„ã‚‹ã®ã§ã€ãƒ‘ãƒãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ–¹ã«ç§»æ¤ã—ã¾ã™ã€‚

![picture 16](images/142efba9b65948b53068db0d5e39b332e471caf1c61a912c34894149bf0643b6.png)  

ãƒ‘ãƒãƒ«ã«ç§»æ¤ã§ãã¾ã—ãŸ(*Â´Ï‰ï½€)
è‰²ãŒçµ¶è³›ã‚„ã°ã„ã§ã™ãŒã€ä½•ã‚‚è€ƒãˆãªã„ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ï½—

### 5. ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‹ã‚‰é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
ã¤ãã¯ã€ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã®ãƒœã‚¿ãƒ³ã‚’ãŠã—ãŸã‚‰é–‹ãã‚ˆã†ã«ã—ã¾ã™ã€‚
è¦ªå­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—é›£ã—ã„ğŸ’¦

ã¨ã‚Šã‚ãˆãšã€`key`ã§ã¨ã£ã¦ã“ã‚Œã‚‹ã¿ãŸã„ãªã®ã§ã€ãƒ‡ãƒ¼ã‚¿åã‚’æŠ¼ã•ã‚ŒãŸã¨ãã«`key`ã‚’è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¨ã°ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚


![picture 17](images/3f275b57a0a24db69d7a845cb298065c8a7e0ec0377a92de9c77defd94bf998d.png)  
ã¨ã‚Šã‚ãˆãšã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ–¹ã«ã¯åæ˜ ã§ãã¾ã—ãŸï¼
ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«ã‚‚åæ˜ ã—ãŸã„ğŸ¤”

![picture 18](images/f95dadd80a4abd4af00d79952ce3ffa91f65f35f37a9e67dc9882c3494f0a1eb.png)  

ã§ãã¾ã—ãŸï½ï¼
ã¨ã‚Šã‚ãˆãšã“ã‚Œã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦é–‹ãã“ã¨ã¯ã§ãã¾ã™ã­ã€‚

ãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†ã—ãŸã‚Šã™ã‚‹ã®ã¯ã‚‚ã†ã¡ã‚‡ã£ã¨æ‰‹é †ãŒå¿…è¦ãã†ã§ã™ã€‚

ã‚ã¨ã€é–‹ããƒœã‚¿ãƒ³ãŒå¿…è¦ãªã•ãã†ãªã®ã§â†
æ–°è¦ä½œæˆãƒœã‚¿ãƒ³ã«å¤‰ãˆã¾ã™ã€‚

## å›ç·šã‚¨ãƒ©ãƒ¼å‡ºã¦ããŸ
```
Cannot connect to the Metro server.

Try the following to fix the issue:
- Ensure that the Metro server is running and available on the same network
- Ensure that your device/emulator is connected to your machine and has USB debugging enabled - run 'adb devices' to see a list of connected devices
- If you're on a physical device connected to the same machine, run 'adb reverse tcp:8081 tcp:8081' to forward requests from your device
- If your device is on the same Wi-Fi network, set 'Debug server host & port for device' in 'Dev settings' to your machine's IP address and the port of the local dev server - e.g. 10.0.1.1:8081

URL: packager.mp-kiu.anonymous.reactnative-texteditor.exp.direct:80
```

æ‰‹é †ã«å¾“ã£ã¦ç›´ã—ã¦ã¿ã¾ã™ã€‚
ã“ã‚Œã§LANæ¥ç¶šã§ãã‚‹ã¨ã„ã„ãª

`adb reverse tcp:8081 tcp:8081`

æ¥ç¶šã§ããªããªã£ãŸï½—ï½—
ãƒ‘ã‚½ã‚³ãƒ³å†èµ·å‹•ã—ã¦äº‹ãªãã‚’å¾—ã¾ã—ãŸï½—
LANå•é¡Œã¯ã¾ãŸä»Šåº¦ã«ã—ã‚ˆã†ã€‚


## ãƒ‡ãƒ¼ã‚¿ã®keyè¨­å®š
ãƒ‡ãƒ¼ã‚¿ã«keyã‚’æŒãŸã›ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã®å›ºæœ‰ã®IDçš„ã«ä½¿ãˆã‚‹ã¯ãšã€‚

```javascript
const [dataKey, setDataKey] = useState(null)
```

- æ–°è¦ä½œæˆæ™‚â†’`dataKey=null`
- ãƒ‡ãƒ¼ã‚¿ç·¨é›†æ™‚â†’`dataKey=å›ºæœ‰ã®key`

ã¨ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

`null`ã®æ™‚ã«ã€é€£ç•ªã®keyã‚’ç™ºè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ï¼
keyã«ã¯`_`ãŒä½¿ãˆãªã„ã®ã§ã€ãã“ã ã‘æ°—ã‚’ä»˜ã‘ã¦ã„ãã¾ã™ã€‚


```javascript
// App.js
function saveFileData(){
  const firstRowEndPos = textInput.split('\n');
  const filetitle = firstRowEndPos.filter(Boolean)[0]
  let key = dataKey

  if (!key){
    key = 'SimpleMD' + data.length + 1
  }

  if (!textInput===false){
    S.saveFileData(S.fileData(key, filetitle, textInput))
  }else{
    console.log('ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
  }
}
```

ã§ãã¾ã—ãŸï½ï¼ 


## ä¿å­˜å¾Œã«ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã«åæ˜ ã™ã‚‹
æ–°è¦ä½œæˆã—ã¦ä¿å­˜ã—ãŸæ™‚ã«ã€ãƒ‘ãƒãƒ«ã®ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã«åæ˜ ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
```javascript
// App.js
function saveFileData(){
  const firstRowEndPos = textInput.split('\n');
  const filetitle = firstRowEndPos.filter(Boolean)[0]
  let key = dataKey

  if (!key){
    key = 'SimpleMD' + data.length + 1
  }

  if (!textInput===false){
    S.saveFileData(S.fileData(key, filetitle, textInput))
  }else{
    console.log('ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
  }
  getAllData()
}
```


## ä¿å­˜æ™‚ã«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‡ºã™
ä¿å­˜ã§ããŸã‹ã©ã†ã‹åˆ†ã‹ã‚Šé›£ã„ã®ã§ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‡ºãã†ã¨æ€ã„ã¾ã™ï¼
[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://reactnative.dev/docs/modal)ã«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã®ã§ã€ä½¿ã£ã¦ã„ãã¾ã™ã€‚

ã‚¢ãƒ©ãƒ¼ãƒˆã£ã¦è¨€ã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã‚ã‚‹ã‚“ã§ã™ãŒã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã®æ–¹ãŒå¯æ„›ã„ã®ã§ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã«ã—ã¾ã™ï½—
![picture 1](images/06f47713a8135377ff231dc07586c8f5ec839ce4bf265cae123cdf69c6461b0d.png)  



```javascript
// App.js
  <Modal
    animationType={'slide'}
    presentationStyle={false}
    transparent={true}
    visible={isModalOpen}
    onRequestClose={()=>{
      console.log('ã¨ã˜ã‚‹ã‚“ã‚‹ã‚“');
    }}
  >
    <View style={styles.centeredView}>
      <View style={styles.modal}>
        <Text>{isSubmit?"ä¿å­˜ã§ãã¾ã—ãŸï¼":"ä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸï¼"}</Text>
        <Pressable
        style={styles.modalBtn}
        onPress={closeModal}
        >
          <Text style={styles.modalText}>é–‰ã˜ã‚‹</Text>
        </Pressable>
      </View>
    </View>
  </Modal>
```

React Nativeã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰æ¥½ã§ã™ã­ï½(*Â´Ï‰ï½€)


ä»Šæ—¥ã¯ã“ã®è¾ºã«ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼
ç¶šãã‚’ãŠæ¥½ã—ã¿ã«(*Â´Ï‰ï½€)